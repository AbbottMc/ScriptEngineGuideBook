# 运行、调试与导出

本小节我们来聊一聊脚本引擎开发过程中的一些小技巧。

### 快速测试脚本

在开发过程中因为要反复测试代码，每测试一次就打包一次附加包的操作显然麻烦的很。

为此`mojang`很贴心的为我们提供了**开发工程专用文件夹**，即位于游戏根目录下的`development_resource_packs`（用于存放开发中的资源包）与`development_behavior_packs`（用于存放开发中的行为包）文件夹。

您可以将您的附加包工程源文件放入对应文件夹，此时进入游戏，您便可在游戏中看到您的附加包已被识别。应用方式与正常附加包无异。

与`behavior_packs`与`resource_packs`文件夹不同的是，开发工程文件夹中的附加包被存档添加后，游戏并不会将其复制至存档目录中，而是**直接使用开发工程目录中的附加包源文件**。也就是说您对该文件夹下的附加包工程文件的所有修改都会在您再次进入存档的时候被应用。

因此这里建议您将您的附加包工程源文件丢到开发工程文件夹中，然后直接在编辑器中对其进行编辑，保存修改后，在游戏中退出重进添加了该附加包的**存档**即可应用您的修改，无需重复多余的操作。

> 关于**热重载**：脚本引擎中某些部分的代码确实是可以在游戏中热重载的，比方说您的自定义UI相关代码。但就笔者个人的开发经验来看，有时也不一定会正常重载，故这里并没有单开一段篇幅来阐述这方面的内容，稳妥起见，建议还是在修改代码后退出重进存档，以防止错误的测试结果给您带来误导，增加您的工作负担。

### 调试您的脚本

在写`bug`过程中，出`bug`是难免的，但找到`bug`起因才是我们改进代码的关键，为此我们需要一些途径来帮助我们迅速定位bug出处，贴心的`mojang`为我们提供了两种方法。

#### 游戏中调试

> **[施工中]**

#### Visual Studio中调试

> **[施工中]**

### 工程导出

在完成开发后，您需要将工程文件导出并打包成为附加包相应格式文件，这里介绍了几种设备上的工程导出方法。

#### win10端

由于Win10端基岩版游戏目录的文件微软使用了加密形式，所以如果您采用了上面的建议，在游戏开发工程专用文件夹中存放并编辑您的工程，您将无法直接通过复制粘贴将其导出（但依旧可以直接编辑其目录下的文件，以及在游戏目录内剪切移动）。为了发布与分享我们的附加包作品，我们可以通过游戏中的**导出世界**功能来“暗度陈仓”。

步骤如下：

1. 首先将您待导出的工程文件分别**剪切**到两个对应的非开发目录下（即`behavior_packs`与`resource_packs`文件夹下）
2. 进入游戏，新建一个世界，并向这个世界添加所有您需要导出的附加包
3. 退出存档，点击该存档右边的编辑按钮进入存档编辑页面
4. 下滑至底端，可看见一个“导出世界按钮”，单击它。接着会弹出一个文件浏览对话框，用以选择您导出世界的存放位置
5. 选择好您导出世界的存放位置后，单击确定，导出便会自动进行，稍等片刻您的世界便会导出到您指定的目录下
6. 进入该目录，将刚导出的世界文件后缀名修改为`.zip`，并解压。
7. 进入解压后的文件夹，找到`behavior_packs`与`resource_packs`文件夹，其中便存放着您需要导出的工程文件。

至此，您的工程文件已然成功导出。

#### 移动端

相较于win10端，移动端就显得简单许多，直接进入游戏根目录，找到存放您开发工程的文件夹即可。