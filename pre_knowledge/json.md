

# JSON格式

本小节我们来学习一下JSON数据格式。

在此之前建议您先学习[JavaScript语言](../pre_knowledge/javascript.html)，以保证对一些编程中的基本概念有一些了解。

### JSON是什么

**JSON**(JavaScript Object Notation) 是一种轻量级的数据交换格式。易于人阅读和编写。同时也易于机器解析和生成[^1]。从本质上来说，JSON属于一种约定俗成的数据格式，而非编程语言，故其并不具有实现算法的功能，最终还需在代码中对其进行解析并进行相应处理。

### JSON用途

JSON数据格式在今天的用途已经非常广泛，几乎大部分语言都有相应的json解析工具包。

在脚本引擎中其主要用于编写附加包的配置文件[^2]（manifest.json）及附加包文件 ，您将在后面的文章中学习到如何构建一个附加包。

### JSON语法

JSON作为一种数据格式，其语法并不困难，这里我们做一个简单的介绍。

##### 键值对

JSON中最基础的内容为一个键值对：

```json
/*
 * 书写形式为：「键名:值」
 * 如下面这个键值对表示的就是：
 * 「以key为键名，以字符串"value"为其对应值」的一个键值对
 */
"key":"value"
```

其中，键名可自定义，键名可以看成是这个值的名字，程序解析完JSON数据后通过键名来调用值。

键名只能为字符串（即使用`""`包裹）

值的变量类型有以下几种:

```json
//字符串
"key_string":"value"

//整型
"key_int":0

//浮点数
"key_float" :0.5

//布尔值，只能为true或false
"key_bool":true //false

/* 对象
 * 在JSON中我们使用一对{}囊括多个键值对来表示一个对象
 * 其中储存着键值对，每对键值对之间以逗号隔开
 * 在JSON中，我们可以将对象理解为一个映射表，其中每个键名对应着一个值
 * 习惯上我们将每个键值对称为该对象的一个属性
 */
"key_object":{
		"obj_child1":"child1",
		"obj_child2":1
	}

/*
 * 数组
 * 在JSON中，我们使用一对[]来表示一个数组,其中每个元素以逗号隔开
 * 以上类型的变量（包括数组）皆可作为数组的子元素[这里以字符串、数组和对象为例]
 */
//以字符串为子元素的数组
"key_array":["a","b","c"]
//以数组为子元素的数组
"key_array_arr_child":[["a","b"],["c","d"]]
//以对象为子元素的数组
"key_array_obj_child":[
    {
        "type":"obj1",
        "attr1":"value1",
        "attr2":"value2"
    },
    {
        "type":"obj2",
        "attr1":"value1",
        "attr2":"value2"
    }
]

```



##### 构建JSON文件

JSON是一个序列化的对象或数组，其文件以`.json`为后缀名。每个JSON文件的主体只有以下两种情况：

###### 数组

```json
//以数组为主体，代表该Json文件储存了一个数组
[]
```

例：`controls.json`

```json
[
    {
        "type":"panel",
        "anchor_from":"top_middle",
        "size":["100%","50%"],
        "controls":[]
    },
    {
        "type":"label",
        "anchor_from":"bottom_middle",
        "size":["100%","50%"],
        "font_size":"23px"
    }
]5
```

上述代码表示`controls.json`-】储存了一个对象数组，当然您也可以储存别的类型的变量，例如：

```json
[ "a", "b", "c", "d" ]
```



###### 对象

```json
//以对象为主体，代表该Json文件储存了一个对象
{}
```

例：`zhang_san.json`

```json
{
    "name":"张三",
    "sex":"未知",
    "age":[10,100],
    "tel":"110",
    "address":"xx看守所"
}
```

上述代码表示`zhang_san.json`储存了有关张三的信息的一个对象，在程序中解析为对象后即可通过对应键名调用其属性。

掌握了以上内容，您就已经可以开始编写属于您自己的`json`文件了。

[^1]:摘自百度百科[JSON]词条
[^2]:同时JSON也是编写附加包的主要语言